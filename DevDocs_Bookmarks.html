<!DOCTYPE html>
<html lang="vi" data-theme="auto">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DevDocs Portal ‚Äî EN‚ÄìVI</title>
<meta name="description" content="C·ªïng tri th·ª©c l·∫≠p tr√¨nh song ng·ªØ, t·ªïng h·ª£p t√†i li·ªáu ch√≠nh th·ª©c cho React, Tailwind, Python, C#, Java, Go, HTML/CSS v√† h·ªá sinh th√°i.">
<style>
  /* ---------- Base Tokens (GitHub Light/Dark) ---------- */
  :root{
    --bg:#ffffff; --fg:#24292e; --muted:#57606a; --card:#f6f8fa; --link:#0969da; --border:#d0d7de; --accent:#1f6feb; --shadow:rgba(27,31,35,0.06);
    --danger:#dc2626; --warn:#d97706; --ok:#16a34a;
    --code-bg:#f6f8fa; --code-fg:#24292e;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0d1117; --fg:#c9d1d9; --muted:#8b949e; --card:#161b22; --link:#58a6ff; --border:#30363d; --accent:#1f6feb; --shadow:rgba(1,4,9,0.35);
      --danger:#ef4444; --warn:#f59e0b; --ok:#22c55e;
      --code-bg:#0d1117; --code-fg:#c9d1d9;
    }
  }
  /* Theme overrides */
  html[data-theme="light"]{ --bg:#ffffff; --fg:#24292e; --muted:#57606a; --card:#f6f8fa; --link:#0969da; --border:#d0d7de; --accent:#1f6feb; --shadow:rgba(27,31,35,0.06); --code-bg:#f6f8fa; --code-fg:#24292e;}
  html[data-theme="dark"]{ --bg:#0d1117; --fg:#c9d1d9; --muted:#8b949e; --card:#161b22; --link:#58a6ff; --border:#30363d; --accent:#1f6feb; --shadow:rgba(1,4,9,0.35); --code-bg:#0d1117; --code-fg:#c9d1d9;}
  html[data-theme="vscode"]{ --bg:#0e1114; --fg:#d4d4d4; --muted:#9da3ae; --card:#11151a; --link:#4fc1ff; --border:#2a2f36; --accent:#3ea6ff; --shadow:rgba(0,0,0,0.35); --code-bg:#0b0f14; --code-fg:#d4d4d4;}
  html[data-theme="hacker"]{ --bg:#050505; --fg:#d0ffd0; --muted:#80c080; --card:#0a0f0a; --link:#00ff99; --border:#113311; --accent:#00e676; --shadow:rgba(0,255,153,0.15); --code-bg:#0a0f0a; --code-fg:#d0ffd0;}
  html[data-theme="solarized"]{ --bg:#fdf6e3; --fg:#073642; --muted:#657b83; --card:#eee8d5; --link:#268bd2; --border:#d3c6a6; --accent:#2aa198; --shadow:rgba(0,0,0,0.08); --code-bg:#eee8d5; --code-fg:#073642;}
  html[data-theme="monokai"]{ --bg:#272822; --fg:#f8f8f2; --muted:#a6e22e; --card:#2d2e28; --link:#66d9ef; --border:#3c3d36; --accent:#fd971f; --shadow:rgba(0,0,0,0.4); --code-bg:#2d2e28; --code-fg:#f8f8f2;}

  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font-family:Inter,ui-sans-serif,System-ui,Segoe UI,Roboto,Arial;line-height:1.6}
  a{color:var(--link);text-decoration:none}
  header{position:sticky;top:0;z-index:20;background:var(--bg);border-bottom:1px solid var(--border)}
  .container{max-width:1220px;margin:0 auto;padding:14px 16px}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .logo{width:30px;height:30px;border-radius:8px;background:var(--accent);color:#fff;display:grid;place-items:center;font-weight:800;box-shadow:0 2px 10px var(--shadow)}
  h1{font-size:20px;margin:0}
  .subtitle{color:var(--muted);font-size:13px}
  .grow{flex:1}
  .btn, .select, summary{appearance:none;border:1px solid var(--border);background:var(--card);color:var(--fg);padding:8px 10px;border-radius:8px;font-size:14px;cursor:pointer}
  .btn:hover, summary:hover{border-color:var(--muted)}
  .toolbar{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .search{flex:1 1 360px;display:flex;gap:8px;align-items:center;background:var(--card);border:1px solid var(--border);border-radius:8px;padding:8px 10px}
  .search input{flex:1;border:none;outline:none;background:transparent;color:var(--fg);font-size:14px}
  .chip{border:1px solid var(--border);color:var(--muted);padding:4px 8px;border-radius:999px;font-size:12px}
  main{display:flex;gap:12px;padding:14px 16px}
  .left{flex: 1 1 720px;min-width: 320px}
  .right{flex: 1 1 480px;min-width: 280px;display:flex;flex-direction:column;gap:12px}
  .panel{background:var(--card);border:1px solid var(--border);border-radius:10px;box-shadow:0 2px 8px var(--shadow)}
  .panel h3{margin:0;padding:10px 12px;border-bottom:1px solid var(--border);font-size:14px}
  .panel-body{padding:10px 12px}
  details.group{border:1px solid var(--border);border-radius:10px;margin-bottom:12px;background:var(--card);box-shadow:0 2px 6px var(--shadow)}
  details.group > summary{user-select:none;list-style:none;display:flex;align-items:center;justify-content:space-between;gap:8px;padding:12px 14px;font-weight:600}
  details.group[open] > summary{border-bottom:1px solid var(--border)}
  .gtitle{display:flex;align-items:center;gap:10px}
  .badge{border:1px solid var(--border);border-radius:6px;padding:2px 6px;color:var(--muted);font-size:12px}
  .links{padding:12px 14px;display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:6px 16px}
  .item{display:flex;align-items:center;gap:8px;padding:6px 0}
  .star{cursor:pointer;opacity:.6}
  .star.active{color:#f59e0b;opacity:1}
  .meta{color:var(--muted);font-size:12px}
  .tooltip{position:fixed;z-index:50;pointer-events:none;background:var(--card);border:1px solid var(--border);border-radius:8px;padding:8px 10px;color:var(--fg);font-size:12px;box-shadow:0 6px 20px var(--shadow);max-width:320px;display:none}
  iframe{width:100%;height:60vh;border:none;border-top:1px solid var(--border)}
  .note-area{width:100%;min-height:120px;background:var(--bg);color:var(--fg);border:1px solid var(--border);border-radius:8px;padding:8px;font-family:ui-monospace,Consolas,Menlo,monospace}
  .stats{display:flex;flex-wrap:wrap;gap:8px}
  .stat{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:8px 10px;font-size:12px}
  .hidden{display:none!important}
  @media (max-width: 980px){ main{flex-direction:column} .right{order:-1} }
  @media print{ header, .toolbar, .right, .star, .controls-row{ display:none !important } details.group{border:none;box-shadow:none} body{background:#fff;color:#000} }
</style>
</head>
<body>
<header>
  <div class="container">
    <div class="row">
      <div class="logo">DD</div>
      <div class="grow">
        <h1>DevDocs Portal ‚Äî Song Ng·ªØ (EN‚ÄìVI)</h1>
        <div class="subtitle">C·ªïng t√†i li·ªáu ch√≠nh th·ª©c: React, Tailwind, Python, C#, Java, Go, HTML/CSS & h·ªá sinh th√°i. Phong c√°ch GitHub. C·∫≠p nh·∫≠t: 2025-10-09 06:40:24</div>
      </div>
      <div>
        <select id="themeSelect" class="select" title="Ch·ªß ƒë·ªÅ giao di·ªán">
          <option value="auto">Theme: Auto</option>
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="vscode">VS Code Blue</option>
          <option value="hacker">Hacker Neon</option>
          <option value="solarized">Solarized</option>
          <option value="monokai">Monokai</option>
        </select>
      </div>
    </div>

    <div class="toolbar">
      <div class="search">
        <span>üîé</span>
        <input id="searchInput" type="search" list="suggestList" placeholder="T√¨m t√†i li·ªáu‚Ä¶ / Search docs‚Ä¶" />
        <datalist id="suggestList"></datalist>
      </div>
      <select id="groupFilter" class="select">
        <option value="">T·∫•t c·∫£ nh√≥m</option>
        <option>React</option><option>Tailwind</option><option>Python</option><option>C#</option><option>Java</option><option>Go</option><option>Web</option><option>Tools</option><option>Favorites</option>
      </select>
      <select id="typeFilter" class="select">
        <option value="">M·ªçi lo·∫°i</option>
        <option value="official">Official</option>
        <option value="vi">Ti·∫øng Vi·ªát</option>
        <option value="framework">Framework</option>
        <option value="library">Library</option>
        <option value="tool">Tool</option>
        <option value="spec">Spec</option>
        <option value="api">API</option>
        <option value="guide">Guide</option>
      </select>
      <button id="expandAll" class="btn">M·ªü t·∫•t c·∫£</button>
      <button id="collapseAll" class="btn">Thu g·ªçn t·∫•t c·∫£</button>
      <button id="printBtn" class="btn" title="In ra PDF (d√πng Print to PDF c·ªßa tr√¨nh duy·ªát)">In / PDF</button>
      <button id="exportJson" class="btn">Export JSON</button>
      <button id="exportMd" class="btn">Export Markdown</button>
      <label class="btn"><input id="importJson" type="file" accept="application/json" class="hidden">Import JSON</label>
      <span class="chip">Ph√≠m t·∫Øt: <kbd>/</kbd> t√¨m ki·∫øm ‚Ä¢ <kbd>Shift</kbd>+<kbd>O</kbd> xem trong panel</span>
    </div>
  </div>
</header>

<main class="container">
  <section class="left">
    <div class="panel stats">
      <div class="stat" id="stat-total">T·ªïng link: 0</div>
      <div class="stat" id="stat-en">EN: 0</div>
      <div class="stat" id="stat-vi">VI: 0</div>
      <div class="stat" id="stat-fav">‚≠ê Favorites: 0</div>
    </div>

    <div id="groups"></div>
  </section>

  <aside class="right">
    <div class="panel">
      <h3>üìÑ Xem tr∆∞·ªõc t√†i li·ªáu (Preview)</h3>
      <div class="panel-body">
        <label><input type="checkbox" id="previewToggle"> M·ªü link trong khung xem tr∆∞·ªõc (iframe)</label>
        <iframe id="previewFrame" class="hidden"></iframe>
      </div>
    </div>

    <div class="panel">
      <h3>üìù Ghi ch√∫ c√° nh√¢n</h3>
      <div class="panel-body">
        <div class="meta">Li√™n k·∫øt hi·ªán t·∫°i: <span id="noteLink" class="meta">‚Äî</span></div>
        <textarea id="noteArea" class="note-area" placeholder="Vi·∫øt ghi ch√∫ cho t√†i li·ªáu n√†y‚Ä¶"></textarea>
        <div class="row" style="margin-top:8px">
          <button id="saveNote" class="btn">L∆∞u ghi ch√∫</button>
          <button id="delNote" class="btn" style="color:var(--danger)">X√≥a ghi ch√∫</button>
        </div>
      </div>
    </div>
  </aside>
</main>

<div class="tooltip" id="tooltip"></div>

<script>
(function(){
  const TODAY = "2025-10-09 06:40:24";
  const THEME_KEY = "devdocs.theme";
  const FAV_KEY = "devdocs.favs";
  const NOTES_KEY = "devdocs.notes";
  const DATA_KEY = "devdocs.index"; // allow import/merge later

  const themeSelect = document.getElementById('themeSelect');
  const searchInput = document.getElementById('searchInput');
  const suggestList = document.getElementById('suggestList');
  const groupFilter = document.getElementById('groupFilter');
  const typeFilter = document.getElementById('typeFilter');
  const expandAllBtn = document.getElementById('expandAll');
  const collapseAllBtn = document.getElementById('collapseAll');
  const printBtn = document.getElementById('printBtn');
  const exportJsonBtn = document.getElementById('exportJson');
  const exportMdBtn = document.getElementById('exportMd');
  const importJsonInput = document.getElementById('importJson');
  const groupsRoot = document.getElementById('groups');
  const statTotal = document.getElementById('stat-total');
  const statEN = document.getElementById('stat-en');
  const statVI = document.getElementById('stat-vi');
  const statFav = document.getElementById('stat-fav');
  const previewToggle = document.getElementById('previewToggle');
  const previewFrame = document.getElementById('previewFrame');
  const tooltip = document.getElementById('tooltip');
  const noteArea = document.getElementById('noteArea');
  const noteLink = document.getElementById('noteLink');
  const saveNoteBtn = document.getElementById('saveNote');
  const delNoteBtn = document.getElementById('delNote');

  /* ---------- Data: groups and items ---------- */
  // Each item: { t: "Title", url, lang: "EN|VI", type: "official|framework|library|tool|spec|api|guide", desc, tags:[...], group:"React" }
  const DATA = { groups: [
    { name: "React", icon: "‚öõÔ∏è", subtitle: "H·ªá sinh th√°i React", items: [
      {t:"React ‚Äì Official Docs", url:"https://react.dev", lang:"EN", type:"official", desc:"React official documentation.", tags:["react","official"]},
      {t:"React ‚Äì Legacy Docs", url:"https://legacy.reactjs.org", lang:"EN", type:"guide", desc:"Legacy docs for React 17 and below.", tags:["react","legacy"]},
      {t:"React ‚Äì Vietnamese Docs", url:"https://vi.reactjs.org/", lang:"VI", type:"guide", desc:"B·∫£n d·ªãch ti·∫øng Vi·ªát (n·∫øu c√≤n).", tags:["react","vi"]},
      {t:"Next.js ‚Äì Docs", url:"https://nextjs.org/docs", lang:"EN", type:"framework", desc:"React framework for production.", tags:["nextjs","framework"]},
      {t:"Redux Toolkit ‚Äì Docs", url:"https://redux-toolkit.js.org", lang:"EN", type:"library", desc:"Official Redux Toolkit.", tags:["redux","state"]},
      {t:"React Router ‚Äì Docs", url:"https://reactrouter.com/en/main", lang:"EN", type:"library", desc:"Routing for React apps.", tags:["router","spa"]},
      {t:"TanStack Query ‚Äì Docs", url:"https://tanstack.com/query/latest/docs/react", lang:"EN", type:"library", desc:"Data fetching & caching.", tags:["query","data"]},
      {t:"TypeScript ‚Äì Docs", url:"https://www.typescriptlang.org/docs/", lang:"EN", type:"guide", desc:"Typed superset of JS.", tags:["typescript","ts"]},
      {t:"Vite ‚Äì Guide", url:"https://vitejs.dev/guide/", lang:"EN", type:"tool", desc:"Frontend tooling & dev server.", tags:["vite","build"]},
      {t:"Babel ‚Äì Docs", url:"https://babeljs.io/docs/", lang:"EN", type:"tool", desc:"JS compiler.", tags:["babel","compiler"]},
    ]},
    { name: "Tailwind", icon: "üé®", subtitle: "Th∆∞ vi·ªán giao di·ªán", items: [
      {t:"Tailwind CSS ‚Äì Docs", url:"https://tailwindcss.com/docs", lang:"EN", type:"official", desc:"Utility-first CSS framework.", tags:["tailwind","css"]},
      {t:"Tailwind CSS ‚Äì Ti·∫øng Vi·ªát", url:"https://v1.tailwindcss.vn/docs", lang:"VI", type:"guide", desc:"B·∫£n d·ªãch community.", tags:["tailwind","vi"]},
      {t:"shadcn/ui ‚Äì Docs", url:"https://ui.shadcn.com", lang:"EN", type:"library", desc:"Headless + Tailwind component.", tags:["shadcn","ui"]},
      {t:"daisyUI ‚Äì Components", url:"https://daisyui.com/components/", lang:"EN", type:"library", desc:"Tailwind components.", tags:["daisyui","ui"]},
      {t:"Flowbite ‚Äì Docs", url:"https://flowbite.com/docs/", lang:"EN", type:"library", desc:"Tailwind components kit.", tags:["flowbite","ui"]},
      {t:"Headless UI ‚Äì Docs", url:"https://headlessui.com", lang:"EN", type:"library", desc:"Unstyled UI primitives.", tags:["headlessui","ui"]},
    ]},
    { name: "Python", icon: "üêç", subtitle: "Ng√¥n ng·ªØ & ML", items: [
      {t:"Python ‚Äì Official Docs", url:"https://docs.python.org/3/", lang:"EN", type:"official", desc:"Python language and stdlib.", tags:["python","official"]},
      {t:"Python ‚Äì Ti·∫øng Vi·ªát", url:"https://docs.python.org/vi/3/", lang:"VI", type:"guide", desc:"B·∫£n d·ªãch ti·∫øng Vi·ªát.", tags:["python","vi"]},
      {t:"PyPI ‚Äì Packages", url:"https://pypi.org/", lang:"EN", type:"api", desc:"Python Package Index.", tags:["pypi","packages"]},
      {t:"NumPy ‚Äì Docs", url:"https://numpy.org/doc/", lang:"EN", type:"library", desc:"Numerical computing.", tags:["numpy","math"]},
      {t:"Pandas ‚Äì Docs", url:"https://pandas.pydata.org/docs/", lang:"EN", type:"library", desc:"Data analysis.", tags:["pandas","data"]},
      {t:"scikit-learn ‚Äì Docs", url:"https://scikit-learn.org/stable/", lang:"EN", type:"library", desc:"Machine learning.", tags:["sklearn","ml"]},
      {t:"Matplotlib ‚Äì Docs", url:"https://matplotlib.org/stable/contents.html", lang:"EN", type:"library", desc:"Plotting.", tags:["matplotlib","plot"]},
      {t:"Flask ‚Äì Docs", url:"https://flask.palletsprojects.com/en/stable/", lang:"EN", type:"framework", desc:"Micro web framework.", tags:["flask","web"]},
      {t:"Django ‚Äì Docs", url:"https://docs.djangoproject.com/en/stable/", lang:"EN", type:"framework", desc:"Full-stack web framework.", tags:["django","web"]},
      {t:"FastAPI ‚Äì Docs", url:"https://fastapi.tiangolo.com/", lang:"EN", type:"framework", desc:"High-performance APIs.", tags:["fastapi","api"]},
      {t:"Hitchhiker‚Äôs Guide to Python", url:"https://docs.python-guide.org/", lang:"EN", type:"guide", desc:"Best practices.", tags:["guide","best-practice"]},
    ]},
    { name: "C#", icon: "üß±", subtitle: "N·ªÅn t·∫£ng .NET", items: [
      {t:"C# ‚Äì Microsoft Learn", url:"https://learn.microsoft.com/en-us/dotnet/csharp/", lang:"EN", type:"official", desc:"Language guide.", tags:["csharp","official"]},
      {t:".NET ‚Äì API Reference", url:"https://learn.microsoft.com/en-us/dotnet/api/", lang:"EN", type:"api", desc:".NET API surfaces.", tags:["dotnet","api"]},
      {t:"ASP.NET Core ‚Äì Docs", url:"https://learn.microsoft.com/en-us/aspnet/core", lang:"EN", type:"framework", desc:"Web with .NET.", tags:["aspnet","web"]},
      {t:"Entity Framework Core ‚Äì Docs", url:"https://learn.microsoft.com/en-us/ef/core/", lang:"EN", type:"library", desc:"ORM for .NET.", tags:["efcore","orm"]},
      {t:"WinForms ‚Äì Docs", url:"https://learn.microsoft.com/en-us/dotnet/desktop/winforms/", lang:"EN", type:"framework", desc:"Windows Forms.", tags:["winforms","desktop"]},
      {t:"Blazor ‚Äì Docs", url:"https://learn.microsoft.com/en-us/aspnet/core/blazor/", lang:"EN", type:"framework", desc:"Web UI with .NET.", tags:["blazor","web"]},
      {t:"LINQ ‚Äì Docs", url:"https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/linq/", lang:"EN", type:"guide", desc:"Language Integrated Query.", tags:["linq","query"]},
      {t:"NuGet ‚Äì Packages", url:"https://www.nuget.org/", lang:"EN", type:"api", desc:".NET packages.", tags:["nuget","packages"]},
    ]},
    { name: "Java", icon: "‚òï", subtitle: "H·ªá sinh th√°i Java", items: [
      {t:"Java SE ‚Äì Docs", url:"https://docs.oracle.com/en/java/javase/", lang:"EN", type:"official", desc:"Java SE documentation.", tags:["java","official"]},
      {t:"The Java Tutorials", url:"https://docs.oracle.com/javase/tutorial/", lang:"EN", type:"guide", desc:"Official tutorials.", tags:["java","tutorial"]},
      {t:"Spring Framework ‚Äì Reference", url:"https://docs.spring.io/spring-framework/reference/", lang:"EN", type:"framework", desc:"Spring core.", tags:["spring","framework"]},
      {t:"Spring Boot ‚Äì Reference", url:"https://docs.spring.io/spring-boot/docs/current/reference/html/", lang:"EN", type:"framework", desc:"Spring Boot.", tags:["spring-boot","framework"]},
      {t:"Hibernate ORM ‚Äì Docs", url:"https://hibernate.org/orm/documentation/", lang:"EN", type:"library", desc:"Popular Java ORM.", tags:["hibernate","orm"]},
      {t:"Maven ‚Äì Guides", url:"https://maven.apache.org/guides/", lang:"EN", type:"tool", desc:"Build automation.", tags:["maven","build"]},
      {t:"Gradle ‚Äì User Guide", url:"https://docs.gradle.org/current/userguide/userguide.html", lang:"EN", type:"tool", desc:"Build tool.", tags:["gradle","build"]},
      {t:"JavaFX ‚Äì Javadoc", url:"https://openjfx.io/javadoc/", lang:"EN", type:"api", desc:"JavaFX API.", tags:["javafx","ui"]},
    ]},
    { name: "Go", icon: "üêπ", subtitle: "Ng√¥n ng·ªØ & th∆∞ vi·ªán", items: [
      {t:"Go ‚Äì Official Docs", url:"https://go.dev/doc/", lang:"EN", type:"official", desc:"Go language docs.", tags:["go","official"]},
      {t:"Go ‚Äì Standard Library API", url:"https://pkg.go.dev/std", lang:"EN", type:"api", desc:"Std library.", tags:["stdlib"]},
      {t:"Effective Go", url:"https://go.dev/doc/effective_go", lang:"EN", type:"guide", desc:"Idiomatic Go.", tags:["style","best-practice"]},
      {t:"Gin ‚Äì Docs", url:"https://gin-gonic.com/docs/", lang:"EN", type:"framework", desc:"Go web framework.", tags:["gin","web"]},
      {t:"GORM ‚Äì Docs", url:"https://gorm.io/docs/", lang:"EN", type:"library", desc:"ORM for Go.", tags:["gorm","orm"]},
      {t:"Cobra ‚Äì CLI Framework", url:"https://cobra.dev/", lang:"EN", type:"library", desc:"CLI toolkit.", tags:["cobra","cli"]},
      {t:"Viper ‚Äì Config", url:"https://pkg.go.dev/github.com/spf13/viper", lang:"EN", type:"library", desc:"Config for Go.", tags:["viper","config"]},
      {t:"Go by Example", url:"https://gobyexample.com/", lang:"EN", type:"guide", desc:"Annotated examples.", tags:["examples"]},
    ]},
    { name: "Web", icon: "üåê", subtitle: "Chu·∫©n & T√†i li·ªáu", items: [
      {t:"MDN ‚Äì HTML (EN)", url:"https://developer.mozilla.org/en-US/docs/Web/HTML", lang:"EN", type:"guide", desc:"HTML reference and guides.", tags:["mdn","html"]},
      {t:"MDN ‚Äì HTML (VI)", url:"https://developer.mozilla.org/vi/docs/Web/HTML", lang:"VI", type:"guide", desc:"T√†i li·ªáu HTML ti·∫øng Vi·ªát.", tags:["mdn","html","vi"]},
      {t:"MDN ‚Äì CSS (EN)", url:"https://developer.mozilla.org/en-US/docs/Web/CSS", lang:"EN", type:"guide", desc:"CSS reference and guides.", tags:["mdn","css"]},
      {t:"MDN ‚Äì CSS (VI)", url:"https://developer.mozilla.org/vi/docs/Web/CSS", lang:"VI", type:"guide", desc:"T√†i li·ªáu CSS ti·∫øng Vi·ªát.", tags:["mdn","css","vi"]},
      {t:"MDN ‚Äì JavaScript (EN)", url:"https://developer.mozilla.org/en-US/docs/Web/JavaScript", lang:"EN", type:"guide", desc:"JavaScript docs.", tags:["mdn","js"]},
      {t:"MDN ‚Äì JavaScript (VI)", url:"https://developer.mozilla.org/vi/docs/Web/JavaScript", lang:"VI", type:"guide", desc:"T√†i li·ªáu JS ti·∫øng Vi·ªát.", tags:["mdn","js","vi"]},
      {t:"WHATWG ‚Äì HTML Living Standard", url:"https://html.spec.whatwg.org/", lang:"EN", type:"spec", desc:"HTML living standard.", tags:["whatwg","html","spec"]},
      {t:"W3C ‚Äì CSS Specifications", url:"https://www.w3.org/Style/CSS/specs.en.html", lang:"EN", type:"spec", desc:"CSS specs.", tags:["w3c","css","spec"]},
      {t:"Can I Use ‚Äì Browser Support", url:"https://caniuse.com/", lang:"EN", type:"tool", desc:"Browser compatibility.", tags:["compat","browser"]},
      {t:"WHATWG ‚Äì Fetch Standard", url:"https://fetch.spec.whatwg.org/", lang:"EN", type:"spec", desc:"Fetch standard.", tags:["fetch","spec"]},
      {t:"ECMAScript (TC39) ‚Äì Spec", url:"https://tc39.es/ecma262/", lang:"EN", type:"spec", desc:"JS language specification.", tags:["ecmascript","spec"]},
    ]},
    { name: "Tools", icon: "üß©", subtitle: "C√¥ng c·ª• ph√°t tri·ªÉn", items: [
      {t:"Git ‚Äì Documentation", url:"https://git-scm.com/docs", lang:"EN", type:"guide", desc:"Git manual and guides.", tags:["git","vcs"]},
      {t:"GitHub ‚Äì Docs", url:"https://docs.github.com/en", lang:"EN", type:"guide", desc:"GitHub documentation.", tags:["github"]},
      {t:"Node.js ‚Äì Docs", url:"https://nodejs.org/en/docs", lang:"EN", type:"guide", desc:"Node.js documentation.", tags:["node","js"]},
      {t:"pnpm ‚Äì Docs", url:"https://pnpm.io/motivation", lang:"EN", type:"guide", desc:"Fast package manager.", tags:["pnpm","packages"]},
      {t:"Yarn ‚Äì Docs", url:"https://yarnpkg.com/getting-started", lang:"EN", type:"guide", desc:"Yarn package manager.", tags:["yarn","packages"]},
      {t:"ESLint ‚Äì Docs", url:"https://eslint.org/docs/latest/", lang:"EN", type:"guide", desc:"Linting for JS/TS.", tags:["eslint","lint"]},
      {t:"Prettier ‚Äì Docs", url:"https://prettier.io/docs/en/", lang:"EN", type:"guide", desc:"Code formatter.", tags:["prettier","format"]},
      {t:"Webpack ‚Äì Concepts", url:"https://webpack.js.org/concepts/", lang:"EN", type:"guide", desc:"Module bundler concepts.", tags:["webpack","bundler"]},
      {t:"Rollup ‚Äì Docs", url:"https://rollupjs.org/introduction/", lang:"EN", type:"guide", desc:"Bundler and build.", tags:["rollup","bundler"]},
      {t:"Vite ‚Äì Guide", url:"https://vitejs.dev/guide/", lang:"EN", type:"guide", desc:"Next-gen frontend tooling.", tags:["vite","build"]},
    ]},
  ]};

  /* ---------- State ---------- */
  const state = {
    theme: localStorage.getItem(THEME_KEY) || 'auto',
    favorites: JSON.parse(localStorage.getItem(FAV_KEY) || "[]"),
    notes: JSON.parse(localStorage.getItem(NOTES_KEY) || "{}"),
    openInPreview: false,
    currentLink: null,
    data: JSON.parse(localStorage.getItem(DATA_KEY) || "null") || DATA, // allow persisted index
  };

  // Apply theme
  function applyTheme(){
    document.documentElement.setAttribute('data-theme', state.theme);
    themeSelect.value = state.theme;
    localStorage.setItem(THEME_KEY, state.theme);
  }
  themeSelect.addEventListener('change', ()=>{ state.theme = themeSelect.value; applyTheme();});
  applyTheme();

  // Build groups UI
  function buildGroups(){
    groupsRoot.innerHTML = "";
    const frag = document.createDocumentFragment();
    state.data.groups.forEach(group => {
      const det = document.createElement('details');
      det.className = "group";
      det.open = true;

      const summary = document.createElement('summary');
      const left = document.createElement('div');
      left.className = "gtitle";
      left.innerHTML = `<span>${group.icon}</span><span>${group.name} ‚Äî <span class="meta">${group.subtitle}</span></span>`;
      const badge = document.createElement('span');
      badge.className = "badge";
      const viCount = group.items.filter(i=>i.lang==="VI").length;
      badge.textContent = (viCount>0? "EN + VI" : "EN");
      summary.appendChild(left);
      summary.appendChild(badge);
      det.appendChild(summary);

      const links = document.createElement('div');
      links.className = "links";

      group.items.forEach(item => {
        const row = document.createElement('div');
        row.className = "item";
        row.dataset.group = group.name;
        row.dataset.type = item.type;
        row.dataset.lang = item.lang;
        row.dataset.url = item.url;
        row.dataset.title = item.t;
        row.dataset.tags = (item.tags || []).join(",");

        const star = document.createElement('span');
        star.className = "star";
        star.textContent = state.favorites.includes(item.url) ? "‚≠ê" : "‚òÜ";
        if (state.favorites.includes(item.url)) star.classList.add('active');
        star.title = "Th√™m/B·ªè y√™u th√≠ch";
        star.addEventListener('click', (e)=>{
          e.stopPropagation();
          toggleFavorite(item.url, star);
        });

        const a = document.createElement('a');
        a.href = item.url; a.target = "_blank";
        a.textContent = item.t + (item.lang ? ` (${item.lang})` : "");
        a.title = item.desc || "";
        a.addEventListener('click', (e)=>{
          if (state.openInPreview || e.shiftKey){
            e.preventDefault();
            openInPreview(item.url);
            setCurrentNoteLink(item.url, item.t);
          }else{
            setCurrentNoteLink(item.url, item.t);
          }
        });
        a.addEventListener('mouseenter', (e)=> showTooltip(e, item));
        a.addEventListener('mouseleave', hideTooltip);

        const meta = document.createElement('span');
        meta.className = 'meta';
        meta.textContent = `‚Ä¢ ${item.type}`;

        row.appendChild(star);
        row.appendChild(a);
        row.appendChild(meta);
        links.appendChild(row);
      });

      det.appendChild(links);
      frag.appendChild(det);
    });
    groupsRoot.appendChild(frag);
    updateStats();
    buildSuggestions();
  }

  function updateStats(){
    const all = Array.from(groupsRoot.querySelectorAll('.item'));
    const total = all.length;
    const en = all.filter(x=>x.dataset.lang==="EN").length;
    const vi = all.filter(x=>x.dataset.lang==="VI").length;
    const fav = state.favorites.length;
    statTotal.textContent = `T·ªïng link: ${total}`;
    statEN.textContent = `EN: ${en}`;
    statVI.textContent = `VI: ${vi}`;
    statFav.textContent = `‚≠ê Favorites: ${fav}`;
  }

  function buildSuggestions(){
    suggestList.innerHTML = "";
    const set = new Set();
    state.data.groups.forEach(g => g.items.forEach(i => {
      set.add(i.t); (i.tags||[]).forEach(t=>set.add(t)); set.add(g.name);
    }));
    [...set].sort().forEach(x=>{
      const opt = document.createElement('option'); opt.value = x; suggestList.appendChild(opt);
    });
  }

  // Favorites
  function toggleFavorite(url, el){
    const idx = state.favorites.indexOf(url);
    if (idx === -1) state.favorites.push(url); else state.favorites.splice(idx,1);
    localStorage.setItem(FAV_KEY, JSON.stringify(state.favorites));
    el.textContent = state.favorites.includes(url) ? "‚≠ê" : "‚òÜ";
    el.classList.toggle('active', state.favorites.includes(url));
    updateStats();
    applyFilters(); // refresh Favorites view
  }

  // Tooltip
  function showTooltip(e, item){
    tooltip.textContent = item.desc || '';
    if (!tooltip.textContent) return;
    tooltip.style.display = 'block';
    const pad = 10;
    tooltip.style.left = (e.pageX + pad) + 'px';
    tooltip.style.top = (e.pageY + pad) + 'px';
  }
  function hideTooltip(){ tooltip.style.display = 'none'; }

  // Preview
  function openInPreview(url){
    previewFrame.classList.remove('hidden');
    previewFrame.src = url;
  }
  previewToggle.addEventListener('change', ()=>{
    state.openInPreview = previewToggle.checked;
    if (!state.openInPreview) previewFrame.classList.add('hidden');
  });
  document.addEventListener('keydown',(e)=>{
    if (e.shiftKey && (e.key === 'O' || e.key === 'o')){
      previewToggle.checked = !previewToggle.checked;
      previewToggle.dispatchEvent(new Event('change'));
    }
  });

  function setCurrentNoteLink(url, title){
    state.currentLink = url;
    noteLink.textContent = title || url || "‚Äî";
    noteArea.value = (state.notes[url] || "");
  }
  saveNoteBtn.addEventListener('click', ()=>{
    if (!state.currentLink) return alert("H√£y m·ªü m·ªôt li√™n k·∫øt tr∆∞·ªõc ƒë√£.");
    state.notes[state.currentLink] = noteArea.value || "";
    localStorage.setItem(NOTES_KEY, JSON.stringify(state.notes));
    alert("ƒê√£ l∆∞u ghi ch√∫.");
  });
  delNoteBtn.addEventListener('click', ()=>{
    if (!state.currentLink) return;
    delete state.notes[state.currentLink];
    localStorage.setItem(NOTES_KEY, JSON.stringify(state.notes));
    noteArea.value = "";
    alert("ƒê√£ x√≥a ghi ch√∫.");
  });

  // Search & Filters
  function normalize(s){ return (s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,''); }
  function applyFilters(){
    const q = normalize(searchInput.value);
    const g = groupFilter.value;
    const tp = typeFilter.value;
    const items = Array.from(groupsRoot.querySelectorAll('.item'));
    items.forEach(it=>{
      const title = normalize(it.dataset.title + " " + it.dataset.tags + " " + it.dataset.url + " " + it.dataset.group + " " + it.dataset.type + " " + it.dataset.lang);
      let hit = (!q || title.includes(q));
      if (g) {
        if (g === "Favorites") hit = hit && state.favorites.includes(it.dataset.url);
        else hit = hit && it.dataset.group === g;
      }
      if (tp) hit = hit && it.dataset.type === tp;
      it.style.display = hit ? "flex" : "none";
    });
    // auto open groups with visible items
    Array.from(groupsRoot.querySelectorAll('details.group')).forEach(d=>{
      const any = Array.from(d.querySelectorAll('.item')).some(x => x.style.display !== 'none');
      d.open = any;
      d.classList.toggle('hidden', !any);
    });
  }
  searchInput.addEventListener('input', applyFilters);
  groupFilter.addEventListener('change', applyFilters);
  typeFilter.addEventListener('change', applyFilters);
  document.addEventListener('keydown', (e)=>{
    if (e.key === '/'){ e.preventDefault(); searchInput.focus(); }
  });

  // Expand/Collapse
  expandAllBtn.addEventListener('click', ()=>{
    Array.from(groupsRoot.querySelectorAll('details.group')).forEach(d=>{ d.open = true; d.classList.remove('hidden'); });
  });
  collapseAllBtn.addEventListener('click', ()=>{
    Array.from(groupsRoot.querySelectorAll('details.group')).forEach(d=> d.open = false);
  });

  // Export
  printBtn.addEventListener('click', ()=> window.print());
  function download(filename, text, type="text/plain"){
    const a = document.createElement('a');
    a.href = URL.createObjectURL(new Blob([text], {type}));
    a.download = filename;
    a.click();
    URL.revokeObjectURL(a.href);
  }
  exportJsonBtn.addEventListener('click', ()=>{
    download('devdocs-index.json', JSON.stringify(state.data, null, 2), 'application/json');
  });
  exportMdBtn.addEventListener('click', ()=>{
    let md = `# DevDocs Portal (EN‚ÄìVI)\nC·∫≠p nh·∫≠t: $2025-10-09 06:40:24\n\n`;
    state.data.groups.forEach(g=>{
      md += `## ${g.name} ‚Äî ${g.subtitle}\n\n`;
      g.items.forEach(i=>{
        md += `- [${i.t}](${i.url}) ‚Äî ${i.type}${i.lang? ' ¬∑ ' + i.lang : ''}\n`;
      });
      md += `\n`;
    });
    download('devdocs-links.md', md, 'text/markdown');
  });

  // Import (merge)
  importJsonInput.addEventListener('change', async (e)=>{
    const f = e.target.files[0]; if (!f) return;
    const text = await f.text();
    try{
      const incoming = JSON.parse(text);
      mergeData(incoming);
      localStorage.setItem(DATA_KEY, JSON.stringify(state.data));
      buildGroups();
      applyFilters();
      alert("ƒê√£ nh·∫≠p & h·ª£p nh·∫•t JSON t√†i li·ªáu.");
    }catch(err){ alert("File JSON kh√¥ng h·ª£p l·ªá."); }
    importJsonInput.value = "";
  });
  function mergeData(incoming){
    const mapGroup = new Map(state.data.groups.map(g=>[g.name,g]));
    (incoming.groups||[]).forEach(g=>{
      if (!mapGroup.has(g.name)){
        state.data.groups.push(g);
      }else{
        const tgt = mapGroup.get(g.name);
        const urls = new Set(tgt.items.map(i=>i.url));
        (g.items||[]).forEach(i=>{
          if (!urls.has(i.url)){ tgt.items.push(i); urls.add(i.url); }
        });
      }
    });
  }

  // Init
  buildGroups();
  applyFilters();

})();</script>
</body>
</html>
